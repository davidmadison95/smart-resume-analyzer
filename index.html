<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartResumeTool - AI-Powered Resume Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.2/mammoth.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        
        .gradient-text {
            background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        // Ensure DOM is fully loaded
        window.addEventListener('DOMContentLoaded', function() {
            console.log('SmartResumeTool initialized');
            
            // Check if PDF.js is loaded
            if (typeof pdfjsLib === 'undefined') {
                console.error('PDF.js library not loaded');
                // Try to load it again
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js';
                script.onload = function() {
                    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';
                    console.log('PDF.js loaded successfully on retry');
                };
                document.head.appendChild(script);
            } else {
                console.log('PDF.js loaded successfully');
            }
            
            // Check if Mammoth is loaded
            if (typeof mammoth === 'undefined') {
                console.error('Mammoth.js library not loaded');
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.2/mammoth.browser.min.js';
                script.onload = function() {
                    console.log('Mammoth.js loaded successfully on retry');
                };
                document.head.appendChild(script);
            } else {
                console.log('Mammoth.js loaded successfully');
            }
        });
        
        .hero-gradient {
            background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
        }
        
        .teal-glow {
            box-shadow: 0 0 40px rgba(6, 182, 212, 0.3);
        }
        
        .slide-in {
            animation: slideIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(30px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .ai-pulse {
            animation: pulse 2s infinite;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .feature-card {
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .feature-card:hover {
            border-color: #06b6d4;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.2);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #06b6d4;
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #0891b2;
        }
    </style>
</head>
<body class="bg-white">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-lg border-b border-gray-200">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 bg-teal-600 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900">Smart<span class="text-teal-600">ResumeTool</span></h1>
                    <span class="ml-2 px-3 py-1 bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-xs font-semibold rounded-full">Powered by Generative AI</span>
                </div>
                <nav class="hidden md:flex space-x-6">
                    <a href="#home" class="text-gray-600 hover:text-teal-600 transition">Home</a>
                    <a href="#about" class="text-gray-600 hover:text-teal-600 transition">About</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero-gradient py-16">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mb-2 slide-in">
                Get Your Resume <span class="gradient-text">ATS-Ready</span>
            </h2>
            <p class="text-2xl font-semibold text-teal-600 mb-4 slide-in" style="animation-delay: 0.05s">
                🤖 Generative AI in Action
            </p>
            <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto slide-in" style="animation-delay: 0.1s">
                Our AI-powered analyzer helps you optimize your resume for Applicant Tracking Systems and land more interviews
            </p>
            <div class="flex flex-wrap justify-center gap-4 slide-in" style="animation-delay: 0.2s">
                <div class="flex items-center space-x-2 text-gray-600">
                    <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span>Instant AI Analysis</span>
                </div>
                <div class="flex items-center space-x-2 text-gray-600">
                    <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span>AI-Generated Improvements</span>
                </div>
                <div class="flex items-center space-x-2 text-gray-600">
                    <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span>Smart Keyword Matching</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12">
        <!-- Upload Section -->
        <div class="max-w-6xl mx-auto">
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Resume Upload -->
                <div class="bg-white rounded-2xl shadow-xl p-8 feature-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-gray-900">Upload Resume</h3>
                        <span class="text-sm text-gray-500">Step 1 of 2</span>
                    </div>
                    
                    <div id="dropZone" class="border-2 border-dashed border-teal-300 rounded-xl p-8 text-center hover:border-teal-500 transition bg-teal-50 cursor-pointer" onclick="document.getElementById('resumeInput').click()">
                        <input type="file" id="resumeInput" accept=".pdf,.doc,.docx,.txt" class="hidden" onchange="handleFileSelect(event)">
                        <div class="pointer-events-none">
                            <div class="w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <svg class="w-8 h-8 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                            </div>
                            <p class="text-lg font-medium text-gray-900 mb-2">Drop your resume here</p>
                            <p class="text-sm text-gray-500">or click to browse</p>
                            <p class="text-xs text-gray-400 mt-2">Supports PDF, DOC, DOCX, TXT (Max 5MB)</p>
                        </div>
                    </div>
                    
                    <div id="resumeStatus" class="mt-6 hidden">
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 flex items-center">
                            <svg class="w-5 h-5 text-green-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div>
                                <p class="text-sm font-medium text-green-900">Resume uploaded successfully</p>
                                <p class="text-sm text-green-700" id="resumeFileName"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Job Description -->
                <div class="bg-white rounded-2xl shadow-xl p-8 feature-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-gray-900">Job Description</h3>
                        <span class="text-sm text-gray-500">Step 2 of 2</span>
                    </div>
                    
                    <textarea id="jobDescription" 
                        class="w-full h-64 p-4 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-900 focus:ring-2 focus:ring-teal-500 focus:border-transparent resize-none transition"
                        placeholder="Paste the job description here..."></textarea>
                    
                    <div class="mt-4 text-sm text-gray-500">
                        <p>💡 Pro tip: Include the entire job posting for best results</p>
                    </div>
                </div>
            </div>

            <!-- Analyze Button -->
            <div class="text-center mt-8">
                                    <button id="analyzeBtn" onclick="analyzeResumeClick()" 
                    class="px-12 py-4 bg-teal-600 text-white text-lg font-semibold rounded-xl hover:bg-teal-700 transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed teal-glow">
                    <span class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                        </svg>
                        Analyze My Resume
                    </span>
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results" class="max-w-6xl mx-auto mt-16 hidden">
            <!-- Score Cards -->
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <!-- ATS Score -->
                <div class="bg-white rounded-2xl shadow-xl p-6 text-center transform hover:scale-105 transition">
                    <div class="relative w-32 h-32 mx-auto mb-4">
                        <svg class="w-32 h-32">
                            <circle cx="64" cy="64" r="56" stroke="#E5E7EB" stroke-width="12" fill="none"/>
                            <circle id="atsCircle" cx="64" cy="64" r="56" stroke="#06b6d4" stroke-width="12" fill="none"
                                stroke-dasharray="351.86" stroke-dashoffset="351.86" class="progress-ring"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-3xl font-bold text-teal-600" id="atsScoreDisplay">0%</span>
                        </div>
                    </div>
                    <h4 class="text-lg font-semibold text-gray-900">ATS Score</h4>
                    <p class="text-sm text-gray-500 mt-1">Resume compatibility</p>
                </div>

                <!-- Match Score -->
                <div class="bg-white rounded-2xl shadow-xl p-6 text-center transform hover:scale-105 transition">
                    <div class="relative w-32 h-32 mx-auto mb-4">
                        <svg class="w-32 h-32">
                            <circle cx="64" cy="64" r="56" stroke="#E5E7EB" stroke-width="12" fill="none"/>
                            <circle id="matchCircle" cx="64" cy="64" r="56" stroke="#10B981" stroke-width="12" fill="none"
                                stroke-dasharray="351.86" stroke-dashoffset="351.86" class="progress-ring"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-3xl font-bold text-green-600" id="matchScoreDisplay">0%</span>
                        </div>
                    </div>
                    <h4 class="text-lg font-semibold text-gray-900">Match Score</h4>
                    <p class="text-sm text-gray-500 mt-1">Job alignment</p>
                </div>

                <!-- Keywords -->
                <div class="bg-white rounded-2xl shadow-xl p-6 text-center transform hover:scale-105 transition">
                    <div class="w-32 h-32 mx-auto mb-4 flex items-center justify-center bg-blue-50 rounded-full">
                        <div class="text-center">
                            <p class="text-4xl font-bold text-blue-600" id="keywordRatio">0/0</p>
                            <p class="text-sm text-blue-600">Keywords</p>
                        </div>
                    </div>
                    <h4 class="text-lg font-semibold text-gray-900">Keywords Found</h4>
                    <p class="text-sm text-gray-500 mt-1">Critical terms matched</p>
                </div>
            </div>

            <!-- Detailed Analysis -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Detailed Analysis</h3>
                
                <!-- Tabs -->
                <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                    <button onclick="switchTab('keywords')" class="tab-btn px-6 py-2 rounded-md font-medium transition" data-tab="keywords">Keywords</button>
                    <button onclick="switchTab('recommendations')" class="tab-btn px-6 py-2 rounded-md font-medium transition" data-tab="recommendations">Recommendations</button>
                    <button onclick="switchTab('insights')" class="tab-btn px-6 py-2 rounded-md font-medium transition" data-tab="insights">Insights</button>
                    <button onclick="switchTab('ai')" class="tab-btn px-6 py-2 rounded-md font-medium transition" data-tab="ai">
                        <span class="flex items-center">
                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                            </svg>
                            AI Assistant
                        </span>
                    </button>
                </div>

                <!-- Tab Content -->
                <div id="keywordsTab" class="tab-content">
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Matched Keywords -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Matched Keywords
                            </h4>
                            <div id="matchedKeywords" class="flex flex-wrap gap-2"></div>
                        </div>

                        <!-- Missing Keywords -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Missing Keywords
                            </h4>
                            <div id="missingKeywords" class="flex flex-wrap gap-2"></div>
                        </div>
                    </div>
                </div>

                <div id="recommendationsTab" class="tab-content hidden">
                    <div class="space-y-4" id="recommendationsList"></div>
                </div>

                <div id="insightsTab" class="tab-content hidden">
                    <div class="grid md:grid-cols-2 gap-6">
                        <canvas id="radarChart" width="400" height="400"></canvas>
                        <div class="space-y-4" id="insightsList"></div>
                    </div>
                </div>

                <div id="aiTab" class="tab-content hidden">
                    <div class="bg-gradient-to-r from-teal-50 to-cyan-50 rounded-lg p-6 mb-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-teal-600" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M13 7H7v6h6V7z"/>
                                <path fill-rule="evenodd" d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z" clip-rule="evenodd"/>
                            </svg>
                            AI-Powered Resume Enhancement
                        </h4>
                        <p class="text-gray-700">Our generative AI analyzes your resume and suggests powerful improvements to help you stand out.</p>
                    </div>
                    
                    <div class="space-y-6" id="aiSuggestions">
                        <!-- AI suggestions will be populated here -->
                    </div>
                    
                    <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                        <p class="text-sm text-blue-800 flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                            </svg>
                            <strong>Pro Tip:</strong> Click on any suggestion to copy it to your clipboard!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-wrap gap-4 justify-center mt-8">
                <button onclick="exportReport()" class="px-6 py-3 bg-teal-600 text-white rounded-lg font-medium hover:bg-teal-700 transition flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Export Report
                </button>
                <button onclick="window.location.reload()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition">
                    Analyze Another Resume
                </button>
            </div>
        </div>
    </main>

    <!-- About Section -->
    <section id="about" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4 max-w-4xl">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">About the Creator</h2>
            
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">David Madison</h3>
                    <p class="text-gray-600">Technology Professional & AI Enthusiast</p>
                    <div class="flex justify-center space-x-4 mt-4">
                        <a href="mailto:davidmadison95@yahoo.com" class="text-teal-600 hover:text-teal-700">
                            <svg class="w-5 h-5 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            Email
                        </a>
                        <a href="https://www.linkedin.com/in/davidmadison95/" target="_blank" class="text-teal-600 hover:text-teal-700">
                            <svg class="w-5 h-5 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.338 16.338H13.67V12.16c0-.995-.017-2.277-1.387-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248H8.014v-8.59h2.559v1.174h.037c.356-.675 1.227-1.387 2.526-1.387 2.703 0 3.203 1.778 3.203 4.092v4.711zM5.005 6.575a1.548 1.548 0 11-.003-3.096 1.548 1.548 0 01.003 3.096zm-1.337 9.763H6.34v-8.59H3.667v8.59zM17.668 1H2.328C1.595 1 1 1.581 1 2.298v15.403C1 18.418 1.595 19 2.328 19h15.34c.734 0 1.332-.582 1.332-1.299V2.298C19 1.581 18.402 1 17.668 1z" clip-rule="evenodd"></path>
                            </svg>
                            LinkedIn
                        </a>
                    </div>
                </div>

                <div class="prose max-w-none">
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">Background</h4>
                        <p class="text-gray-700">
                            Technology professional with a background in full-stack web development and a strong interest in artificial intelligence. 
                            Currently pursuing a Master of Science in Computer Science with a concentration in AI, with a focus on machine learning, 
                            data-driven problem-solving, and intelligent automation.
                        </p>
                    </div>

                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">Education</h4>
                        <ul class="space-y-3">
                            <li class="text-gray-700">
                                <strong>Master of Science in Computer Science</strong> - AI Concentration<br>
                                Southern New Hampshire University (Expected: May 2026)
                            </li>
                            <li class="text-gray-700">
                                <strong>Bachelor of Science in Information Technology</strong><br>
                                American Military University - GPA: 3.85, Magna Cum Laude
                            </li>
                        </ul>
                    </div>

                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">Technical Skills</h4>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm">Python</span>
                            <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm">JavaScript</span>
                            <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm">React.js</span>
                            <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm">SQL</span>
                            <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm">MongoDB</span>
                            <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm">Machine Learning</span>
                            <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm">Full-Stack Development</span>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">Why I Built SmartResumeTool</h4>
                        <p class="text-gray-700">
                            Having worked in various roles from military service to university administration, I understand the challenges 
                            of career transitions and job searching. I built SmartResumeTool to help job seekers optimize their resumes for 
                            ATS systems, making the application process more accessible and successful for everyone.
                        </p>
                    </div>

                    <div class="text-center mt-8 pt-6 border-t border-gray-200">
                        <p class="text-gray-600 italic">
                            "I enjoy using technology to solve real-world problems and build tools that are simple and effective for users."
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // PDF.js configuration - MUST be set first
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';
        }

        // Wait for all libraries to load
        window.addEventListener('load', function() {
            if (typeof pdfjsLib !== 'undefined') {
                pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';
                console.log('PDF.js worker configured');
            }
        });

        // State
        let resumeContent = '';
        let analysisResults = null;

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Direct file select handler
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                try {
                    handleFile(file);
                } catch (err) {
                    console.error("File handling failed:", err);
                }
            }
        }

        // Initialize drag and drop when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // File upload handling with drag and drop
            const dropZone = document.getElementById('dropZone');
            const resumeInput = document.getElementById('resumeInput');
            const resumeStatus = document.getElementById('resumeStatus');
            const resumeFileName = document.getElementById('resumeFileName');

            if (dropZone) {
                // Prevent default drag behaviors
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropZone.addEventListener(eventName, preventDefaults, false);
                    document.body.addEventListener(eventName, preventDefaults, false);
                });

                // Highlight drop zone when item is dragged over it
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropZone.addEventListener(eventName, highlight, false);
                });

                ['dragleave', 'drop'].forEach(eventName => {
                    dropZone.addEventListener(eventName, unhighlight, false);
                });

                // Handle dropped files
                dropZone.addEventListener('drop', handleDrop, false);
            }
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        function highlight(e) {
            dropZone.classList.add('border-teal-600', 'bg-teal-100', 'scale-105');
            dropZone.style.transform = 'scale(1.02)';
        }

        function unhighlight(e) {
            dropZone.classList.remove('border-teal-600', 'scale-105');
            dropZone.style.transform = 'scale(1)';
        }

        function handleDrop(e) {
    const dt = e.dataTransfer;
    const files = dt.files;
    if (files.length > 0) {
        resumeInput.files = files; // ✅ This fixes drag-and-drop not syncing with input
        handleFile(files[0]);
    }
}

        async function handleFile(file) {
            console.log('Handling file:', file.name, 'Type:', file.type, 'Size:', file.size);
            
            if (file.size > 5 * 1024 * 1024) {
                alert('File size must be less than 5MB');
                return;
            }
            
            // Check file extension if MIME type is empty (happens in some browsers)
            const fileName = file.name.toLowerCase();
            const validExtensions = ['.pdf', '.doc', '.docx', '.txt'];
            const hasValidExtension = validExtensions.some(ext => fileName.endsWith(ext));
            
            const validTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'text/plain', 'application/msword'];
            const hasValidType = validTypes.includes(file.type);
            
            if (!hasValidType && !hasValidExtension) {
                alert('Please upload a PDF, DOC, DOCX, or TXT file');
                return;
            }
            
            document.getElementById('resumeFileName').textContent = file.name;
            document.getElementById('resumeStatus').classList.remove('hidden');
            
            try {
                resumeContent = await parseFile(file);
                console.log('Resume parsed successfully, content length:', resumeContent.length);
                if (resumeContent.length < 50) {
                    alert('The resume appears to be empty or too short. Please check the file.');
                    resumeContent = '';
                }
            } catch (error) {
                console.error('Error parsing file:', error);
                alert('Error parsing file: ' + error.message);
                resumeContent = '';
            }
        }

        // File parsing functions
        async function parseFile(file) {
            const fileType = file.type || '';
            const fileName = file.name.toLowerCase();
            
            console.log('Parsing file - Type:', fileType, 'Name:', fileName);
            
            try {
                // Check by extension first, then by MIME type
                if (fileName.endsWith('.pdf') || fileType === 'application/pdf') {
                    return await parsePDF(file);
                } else if (fileName.endsWith('.docx') || fileType === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
                    return await parseDOCX(file);
                } else if (fileName.endsWith('.txt') || fileType === 'text/plain') {
                    return await file.text();
                } else if (fileName.endsWith('.doc') || fileType === 'application/msword') {
                    // For older .doc files, try to parse as text
                    alert('Note: .DOC files may not parse perfectly. For best results, please save as .DOCX or .PDF');
                    return await parseDOCX(file); // Try DOCX parser
                } else {
                    throw new Error('Unsupported file type. Please upload a PDF, DOCX, DOC, or TXT file.');
                }
            } catch (error) {
                console.error('Parse error:', error);
                throw error;
            }
        }

        async function parsePDF(file) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({data: arrayBuffer}).promise;
                let text = '';
                
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const content = await page.getTextContent();
                    text += content.items.map(item => item.str).join(' ') + '\n';
                }
                
                console.log('PDF parsed successfully, text length:', text.length);
                return text;
            } catch (error) {
                console.error('PDF parsing error:', error);
                throw new Error('Failed to parse PDF. Please ensure the file is not corrupted or password-protected.');
            }
        }

        async function parseDOCX(file) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const result = await mammoth.extractRawText({arrayBuffer});
                console.log('DOCX parsed successfully, text length:', result.value.length);
                return result.value;
            } catch (error) {
                console.error('DOCX parsing error:', error);
                throw new Error('Failed to parse Word document. Please ensure the file is not corrupted.');
            }
        }

        // Analysis button event listener
        function analyzeResumeClick() {
            const jobDesc = document.getElementById('jobDescription').value.trim();
            
            if (!resumeContent || resumeContent.trim() === '') {
                alert('Please upload a resume first');
                return;
            }
            
            if (!jobDesc) {
                alert('Please enter a job description');
                return;
            }
            
            const btn = document.getElementById('analyzeBtn');
            
            // Show AI processing indicator
            const originalContent = btn.innerHTML;
            btn.innerHTML = `
                <span class="flex items-center">
                    <svg class="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    AI Analyzing...
                </span>
            `;
            btn.disabled = true;
            
            // Simulate AI processing time
            setTimeout(() => {
                try {
                    analysisResults = performAnalysis(resumeContent, jobDesc);
                    displayResults(analysisResults);
                    
                    // Restore button
                    btn.innerHTML = originalContent;
                    btn.disabled = false;
                } catch (error) {
                    console.error('Analysis error:', error);
                    alert('An error occurred during analysis. Please try again.');
                    btn.innerHTML = originalContent;
                    btn.disabled = false;
                }
            }, 1500);
        }

        // Main analysis function
        function performAnalysis(resume, jobDesc) {
            console.log('Starting analysis...');
            console.log('Resume length:', resume.length);
            console.log('Job description length:', jobDesc.length);
            
            const jobKeywords = extractKeywords(jobDesc);
            const resumeKeywords = extractKeywords(resume);
            
            console.log('Job keywords found:', jobKeywords.length);
            console.log('Resume keywords found:', resumeKeywords.length);
            
            const matched = jobKeywords.filter(kw => 
                resumeKeywords.some(rk => rk.toLowerCase() === kw.toLowerCase())
            );
            const missing = jobKeywords.filter(kw => 
                !matched.some(mk => mk.toLowerCase() === kw.toLowerCase())
            );
            
            const matchScore = Math.round((matched.length / jobKeywords.length) * 100) || 0;
            const atsScore = calculateATSScore(resume, matched.length, jobKeywords.length);
            
            const recommendations = generateRecommendations(resume, missing, atsScore);
            const insights = generateInsights(resume, matched, missing);
            
            console.log('Analysis complete. Match score:', matchScore, 'ATS score:', atsScore);
            
            return {
                matchScore,
                atsScore,
                matchedKeywords: matched,
                missingKeywords: missing,
                totalKeywords: jobKeywords.length,
                recommendations,
                insights
            };
        }

        function extractKeywords(text) {
            if (!text || text.length < 10) {
                console.warn('Text too short for keyword extraction');
                return [];
            }
            
            const stopWords = new Set(['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'from', 'up', 'about', 'into', 'through', 'during', 'including', 'until', 'against', 'among', 'throughout', 'despite', 'towards', 'upon', 'concerning', 'is', 'are', 'was', 'were', 'been', 'being', 'have', 'has', 'had', 'do', 'does', 'did', 'will', 'would', 'should', 'could', 'may', 'might', 'must', 'can', 'this', 'that', 'these', 'those', 'i', 'you', 'he', 'she', 'it', 'we', 'they', 'them', 'their', 'what', 'which', 'who', 'when', 'where', 'why', 'how', 'all', 'each', 'every', 'some', 'any', 'few', 'more', 'most', 'other', 'such', 'only', 'own', 'same', 'so', 'than', 'too', 'very', 'just', 'work', 'working', 'experience', 'years', 'year', 'ability', 'skills', 'skill', 'required', 'requirements', 'looking', 'candidate', 'position', 'job', 'role', 'us', 'our', 'team', 'company', 'business']);
            
            const words = text.toLowerCase()
                .replace(/[^\w\s\+\#\.]/g, ' ')
                .split(/\s+/)
                .filter(word => word.length > 2 && !stopWords.has(word));
            
            if (words.length === 0) {
                console.warn('No valid words found after filtering');
                return [];
            }
            
            const wordFreq = {};
            words.forEach(word => {
                wordFreq[word] = (wordFreq[word] || 0) + 1;
            });
            
            const keywords = Object.entries(wordFreq)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 25)
                .map(entry => entry[0]);
            
            // Add technical patterns
            const technicalPatterns = [
                /python/i, /java(?!script)/i, /javascript/i, /react/i, /node\.?js/i,
                /sql/i, /html/i, /css/i, /aws/i, /docker/i, /kubernetes/i,
                /machine learning/i, /data analysis/i, /project management/i,
                /agile/i, /scrum/i, /leadership/i, /communication/i, /teamwork/i,
                /excel/i, /powerpoint/i, /salesforce/i, /sap/i, /oracle/i
            ];
            
            technicalPatterns.forEach(pattern => {
                const matches = text.match(pattern);
                if (matches && !keywords.includes(matches[0].toLowerCase())) {
                    keywords.push(matches[0].toLowerCase());
                }
            });
            
            return keywords.length > 0 ? keywords : ['general', 'skills'];
        }

        function calculateATSScore(resume, matchedCount, totalKeywords) {
            let score = 40;
            
            score += (matchedCount / totalKeywords) * 40;
            
            // Format checks
            if (resume.length > 300) score += 3;
            if (resume.includes('@')) score += 3;
            if (/\d{3}[-.\s]?\d{3}[-.\s]?\d{4}/.test(resume)) score += 3;
            if (resume.toLowerCase().includes('experience')) score += 3;
            if (resume.toLowerCase().includes('education')) score += 3;
            if (resume.toLowerCase().includes('skills')) score += 3;
            if (resume.match(/\d{4}/)) score += 2;
            
            return Math.min(Math.round(score), 100);
        }

        function generateRecommendations(resume, missingKeywords, atsScore) {
            const recommendations = [];
            
            if (missingKeywords.length > 0) {
                recommendations.push({
                    type: 'critical',
                    title: 'Add Missing Keywords',
                    description: `Include these important keywords: ${missingKeywords.slice(0, 5).join(', ')}`
                });
            }
            
            if (atsScore < 70) {
                recommendations.push({
                    type: 'important',
                    title: 'Improve Resume Structure',
                    description: 'Use clear section headers: Professional Summary, Experience, Education, Skills'
                });
            }
            
            if (!resume.includes('@')) {
                recommendations.push({
                    type: 'important',
                    title: 'Add Contact Information',
                    description: 'Include your email address and phone number at the top'
                });
            }
            
            recommendations.push({
                type: 'suggestion',
                title: 'Use Action Verbs',
                description: 'Start bullet points with strong action verbs like "Managed", "Developed", "Achieved"'
            });
            
            recommendations.push({
                type: 'suggestion',
                title: 'Quantify Achievements',
                description: 'Add numbers and percentages to demonstrate impact (e.g., "Increased sales by 25%")'
            });
            
            return recommendations;
        }

        function generateInsights(resume, matched, missing) {
            return [
                {
                    label: 'Keyword Density',
                    value: `${((matched.length / (matched.length + missing.length)) * 100).toFixed(1)}%`,
                    description: 'Percentage of job keywords found in your resume'
                },
                {
                    label: 'Resume Length',
                    value: `${resume.split(/\s+/).length} words`,
                    description: 'Ideal length is 400-800 words for most positions'
                },
                {
                    label: 'Skills Match',
                    value: matched.length > 10 ? 'Strong' : matched.length > 5 ? 'Moderate' : 'Weak',
                    description: 'How well your skills align with job requirements'
                },
                {
                    label: 'ATS Readability',
                    value: resume.includes('•') || resume.includes('-') ? 'Good' : 'Needs Work',
                    description: 'Use bullet points for better ATS parsing'
                }
            ];
        }

        function displayResults(results) {
            console.log('Displaying results:', results);
            
            document.getElementById('results').classList.remove('hidden');
            
            // Animate scores
            animateScore('atsScoreDisplay', results.atsScore, '%');
            animateScore('matchScoreDisplay', results.matchScore, '%');
            animateCircle('atsCircle', results.atsScore);
            animateCircle('matchCircle', results.matchScore);
            
            document.getElementById('keywordRatio').textContent = 
                `${results.matchedKeywords.length}/${results.totalKeywords}`;
            
            // Display keywords
            displayKeywords('matchedKeywords', results.matchedKeywords, 'green');
            displayKeywords('missingKeywords', results.missingKeywords.slice(0, 10), 'red');
            
            // Display recommendations
            displayRecommendations(results.recommendations);
            
            // Display insights
            displayInsights(results.insights);
            
            // Create radar chart
            createRadarChart(results);
            
            // Generate and display AI suggestions
            const aiSuggestions = generateAISuggestions(resumeContent, results.matchedKeywords, results.missingKeywords);
            displayAISuggestions(aiSuggestions);
            
            // Show keywords tab by default
            switchTab('keywords');
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            
            console.log('Results displayed successfully');
        }

        function animateScore(elementId, targetValue, suffix = '') {
            const element = document.getElementById(elementId);
            if (!element) {
                console.error('Element not found:', elementId);
                return;
            }
            
            let currentValue = 0;
            const increment = targetValue / 30;
            
            const timer = setInterval(() => {
                currentValue += increment;
                if (currentValue >= targetValue) {
                    currentValue = targetValue;
                    clearInterval(timer);
                }
                element.textContent = Math.round(currentValue) + suffix;
            }, 30);
        }

        function animateCircle(circleId, percentage) {
            const circle = document.getElementById(circleId);
            const circumference = 2 * Math.PI * 56;
            const offset = circumference - (percentage / 100) * circumference;
            
            setTimeout(() => {
                circle.style.transition = 'stroke-dashoffset 1s ease-in-out';
                circle.style.strokeDashoffset = offset;
            }, 100);
        }

        function displayKeywords(containerId, keywords, color) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.error('Container not found:', containerId);
                return;
            }
            
            container.innerHTML = '';
            
            if (!keywords || keywords.length === 0) {
                container.innerHTML = '<span class="text-gray-500 text-sm">No keywords found</span>';
                return;
            }
            
            keywords.forEach(keyword => {
                const span = document.createElement('span');
                span.className = `px-3 py-1 bg-${color}-100 text-${color}-700 rounded-full text-sm font-medium`;
                span.textContent = keyword;
                container.appendChild(span);
            });
        }

        function displayRecommendations(recommendations) {
            const container = document.getElementById('recommendationsList');
            container.innerHTML = '';
            
            recommendations.forEach(rec => {
                const div = document.createElement('div');
                div.className = 'bg-gray-50 rounded-lg p-4';
                
                const iconColor = rec.type === 'critical' ? 'red' : rec.type === 'important' ? 'yellow' : 'blue';
                
                div.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="w-6 h-6 text-${iconColor}-500 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h5 class="text-sm font-semibold text-gray-900">${rec.title}</h5>
                            <p class="text-sm text-gray-600 mt-1">${rec.description}</p>
                        </div>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        function displayInsights(insights) {
            const container = document.getElementById('insightsList');
            container.innerHTML = '';
            
            insights.forEach(insight => {
                const div = document.createElement('div');
                div.className = 'bg-gray-50 rounded-lg p-4';
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-1">
                        <h5 class="text-sm font-semibold text-gray-900">${insight.label}</h5>
                        <span class="text-sm font-bold text-teal-600">${insight.value}</span>
                    </div>
                    <p class="text-xs text-gray-600">${insight.description}</p>
                `;
                container.appendChild(div);
            });
        }

        let radarChart = null;

        function createRadarChart(results) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            if (radarChart) {
                radarChart.destroy();
            }
            
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Keywords', 'ATS Format', 'Content Quality', 'Structure', 'Relevance'],
                    datasets: [{
                        label: 'Your Resume',
                        data: [
                            results.matchScore,
                            results.atsScore,
                            results.atsScore > 70 ? 80 : 60,
                            results.atsScore > 60 ? 75 : 50,
                            results.matchScore > 60 ? 85 : 55
                        ],
                        fill: true,
                        backgroundColor: 'rgba(6, 182, 212, 0.2)',
                        borderColor: 'rgba(6, 182, 212, 1)',
                        pointBackgroundColor: 'rgba(6, 182, 212, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(6, 182, 212, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20,
                                color: '#4B5563'
                            },
                            grid: {
                                color: '#E5E7EB'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active state from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'text-teal-600', 'shadow');
                btn.classList.add('text-gray-600');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Add active state to selected button
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeBtn) {
                activeBtn.classList.remove('text-gray-600');
                activeBtn.classList.add('bg-white', 'text-teal-600', 'shadow');
            }
        }

        function generateAISuggestions(resume, matchedKeywords, missingKeywords) {
            const suggestions = [];
            
            // Action verb improvements
            const weakVerbs = ['responsible for', 'helped', 'worked on', 'assisted'];
            const strongVerbs = {
                'responsible for': ['Managed', 'Led', 'Directed', 'Oversaw'],
                'helped': ['Facilitated', 'Contributed to', 'Supported', 'Enhanced'],
                'worked on': ['Developed', 'Implemented', 'Executed', 'Delivered'],
                'assisted': ['Collaborated', 'Partnered', 'Coordinated', 'Streamlined']
            };
            
            // Generate bullet point suggestions
            if (missingKeywords.length > 0) {
                suggestions.push({
                    type: 'bullet',
                    title: '🎯 AI-Enhanced Bullet Points',
                    original: 'Worked on projects with team members',
                    improved: `Collaborated with cross-functional teams to deliver ${missingKeywords[0] || 'innovative'} solutions, resulting in improved ${missingKeywords[1] || 'efficiency'} and stakeholder satisfaction`,
                    explanation: 'Incorporates missing keywords and quantifiable results'
                });
            }
            
            // Technical skills enhancement
            suggestions.push({
                type: 'skills',
                title: '💡 Skills Section Enhancement',
                original: 'Skills: Programming, Databases, Web Development',
                improved: `Technical Skills: ${matchedKeywords.slice(0, 3).join(', ')}, ${missingKeywords.slice(0, 2).join(', ')} (currently learning), Full-Stack Development, RESTful APIs, Version Control (Git)`,
                explanation: 'Groups skills by category and shows growth mindset'
            });
            
            // Summary enhancement
            suggestions.push({
                type: 'summary',
                title: '📝 AI-Powered Professional Summary',
                original: 'Experienced professional looking for new opportunities',
                improved: `Results-driven professional with expertise in ${matchedKeywords[0] || 'technology'} and ${matchedKeywords[1] || 'innovation'}, seeking to leverage proven track record in ${missingKeywords[0] || 'leadership'} to drive organizational success. Demonstrated ability to ${missingKeywords[1] || 'optimize processes'} and deliver measurable impact.`,
                explanation: 'Creates compelling narrative with keywords and value proposition'
            });
            
            // Achievement enhancement
            suggestions.push({
                type: 'achievement',
                title: '🏆 Achievement Optimization',
                original: 'Improved system performance',
                improved: 'Optimized system performance by 40%, reducing load times from 5 seconds to 3 seconds, resulting in enhanced user experience for 10,000+ daily active users',
                explanation: 'Adds metrics, scope, and impact to achievements'
            });
            
            return suggestions;
        }

        function displayAISuggestions(suggestions) {
            const container = document.getElementById('aiSuggestions');
            container.innerHTML = '';
            
            suggestions.forEach((suggestion, index) => {
                const div = document.createElement('div');
                div.className = 'bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition';
                
                const iconMap = {
                    bullet: '🎯',
                    skills: '💡',
                    summary: '📝',
                    achievement: '🏆'
                };
                
                div.innerHTML = `
                    <h5 class="text-lg font-semibold text-gray-900 mb-4">${suggestion.title}</h5>
                    
                    <div class="space-y-3">
                        <div class="bg-red-50 p-3 rounded-lg">
                            <p class="text-sm font-medium text-red-800 mb-1">❌ Before:</p>
                            <p class="text-sm text-gray-700">${suggestion.original}</p>
                        </div>
                        
                        <div class="bg-green-50 p-3 rounded-lg cursor-pointer hover:bg-green-100 transition" onclick="copyToClipboard('${suggestion.improved.replace(/'/g, "\\'")}', ${index})">
                            <p class="text-sm font-medium text-green-800 mb-1">✅ After (AI-Enhanced):</p>
                            <p class="text-sm text-gray-700">${suggestion.improved}</p>
                            <p class="text-xs text-green-600 mt-2" id="copy-feedback-${index}" style="display: none;">Copied to clipboard!</p>
                        </div>
                        
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <p class="text-sm text-blue-800">
                                <strong>AI Insight:</strong> ${suggestion.explanation}
                            </p>
                        </div>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        function copyToClipboard(text, index) {
            navigator.clipboard.writeText(text).then(() => {
                const feedback = document.getElementById(`copy-feedback-${index}`);
                feedback.style.display = 'block';
                setTimeout(() => {
                    feedback.style.display = 'none';
                }, 2000);
            });
        }
function exportReport() {
    if (!analysisResults) return;

    let report = `RESUME ANALYSIS REPORT\n`;
    report += `Generated: ${new Date().toLocaleDateString()}\n`;
    report += `${'='.repeat(50)}\n\n`;

    report += `SCORES\n`;
    report += `ATS Score: ${analysisResults.atsScore}/100\n`;
    report += `Match Score: ${analysisResults.matchScore}%\n`;
    report += `Keywords Matched: ${analysisResults.matchedKeywords.length}/${analysisResults.totalKeywords}\n\n`;

    report += `MATCHED KEYWORDS\n`;
    report += analysisResults.matchedKeywords.join(', ') + '\n\n';

    report += `MISSING KEYWORDS\n`;
    report += analysisResults.missingKeywords.join(', ') + '\n\n';

    report += `RECOMMENDATIONS\n`;
    analysisResults.recommendations.forEach((rec, i) => {
        report += `${i + 1}. ${rec.title}\n   ${rec.description}\n\n`;
    });

    report += `INSIGHTS\n`;
    analysisResults.insights.forEach(insight => {
        report += `${insight.label}: ${insight.value}\n`;
    });

    const blob = new Blob([report], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'resume-analysis-report.txt';
    a.click();
    URL.revokeObjectURL(url);
}
    </script>
</body>
</html>
